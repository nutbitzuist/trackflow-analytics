<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrackFlow Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">
    <style>
        * {
            font-family: 'DM Sans', sans-serif;
        }

        .font-mono {
            font-family: 'Space Mono', monospace;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes pulse-glow {

            0%,
            100% {
                box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
            }

            50% {
                box-shadow: 0 0 20px 5px rgba(99, 102, 241, 0.2);
            }
        }

        @keyframes gradient-shift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .animate-slide-up {
            animation: slideUp 0.5s ease-out forwards;
        }

        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }

        .animate-pulse-glow {
            animation: pulse-glow 2s infinite;
        }

        .gradient-animated {
            background: linear-gradient(-45deg, #667eea, #764ba2, #6B8DD6, #8E37D7);
            background-size: 400% 400%;
            animation: gradient-shift 15s ease infinite;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .dark .glass-card {
            background: rgba(30, 30, 40, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.15);
        }

        .sidebar-item {
            transition: all 0.2s ease;
        }

        .sidebar-item:hover {
            transform: translateX(4px);
        }

        .live-dot {
            animation: pulse-glow 1.5s infinite;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(99, 102, 241, 0.3);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(99, 102, 241, 0.5);
        }

        .noise-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.015;
            z-index: 1000;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81',
                        }
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-slate-50 dark:bg-slate-900 min-h-screen">
    <div class="noise-overlay"></div>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // Mock data generator
        const generateMockData = (days = 30) => {
            const data = [];
            const now = new Date();
            for (let i = days - 1; i >= 0; i--) {
                const date = new Date(now);
                date.setDate(date.getDate() - i);
                data.push({
                    date: date.toISOString().split('T')[0],
                    visitors: Math.floor(Math.random() * 2000) + 500,
                    pageviews: Math.floor(Math.random() * 5000) + 1000,
                    sessions: Math.floor(Math.random() * 3000) + 700,
                    bounceRate: Math.floor(Math.random() * 30) + 25,
                    avgDuration: Math.floor(Math.random() * 180) + 60,
                });
            }
            return data;
        };

        const websites = [
            { id: 1, name: 'mystore.com', domain: 'mystore.com', visitors: 45230, revenue: 12450, color: '#6366f1' },
            { id: 2, name: 'blog.mycompany.io', domain: 'blog.mycompany.io', visitors: 23100, revenue: 3200, color: '#8b5cf6' },
            { id: 3, name: 'saas-app.co', domain: 'saas-app.co', visitors: 67800, revenue: 28900, color: '#a855f7' },
            { id: 4, name: 'portfolio.dev', domain: 'portfolio.dev', visitors: 12400, revenue: 0, color: '#d946ef' },
            { id: 5, name: 'newsletter.io', domain: 'newsletter.io', visitors: 34500, revenue: 5600, color: '#ec4899' },
            { id: 6, name: 'ecommerce-shop.com', domain: 'ecommerce-shop.com', visitors: 89200, revenue: 45300, color: '#f43f5e' },
            { id: 7, name: 'landing-page.co', domain: 'landing-page.co', visitors: 15600, revenue: 2100, color: '#f97316' },
            { id: 8, name: 'docs.myproduct.com', domain: 'docs.myproduct.com', visitors: 28900, revenue: 0, color: '#eab308' },
            { id: 9, name: 'community.app', domain: 'community.app', visitors: 41200, revenue: 8700, color: '#22c55e' },
            { id: 10, name: 'api-service.io', domain: 'api-service.io', visitors: 19800, revenue: 15200, color: '#14b8a6' },
        ];

        const topPages = [
            { path: '/', views: 12450, percentage: 28 },
            { path: '/pricing', views: 8900, percentage: 20 },
            { path: '/features', views: 6700, percentage: 15 },
            { path: '/blog/top-10-tips', views: 4500, percentage: 10 },
            { path: '/about', views: 3200, percentage: 7 },
            { path: '/contact', views: 2800, percentage: 6 },
            { path: '/docs/getting-started', views: 2100, percentage: 5 },
            { path: '/signup', views: 1900, percentage: 4 },
        ];

        const trafficSources = [
            { source: 'Google', visitors: 18500, percentage: 42, icon: 'ðŸ”', color: '#4285f4' },
            { source: 'Direct', visitors: 12300, percentage: 28, icon: 'ðŸ”—', color: '#6366f1' },
            { source: 'Twitter/X', visitors: 5600, percentage: 13, icon: 'ð•', color: '#000' },
            { source: 'Product Hunt', visitors: 3400, percentage: 8, icon: 'ðŸš€', color: '#da552f' },
            { source: 'LinkedIn', visitors: 2100, percentage: 5, icon: 'ðŸ’¼', color: '#0077b5' },
            { source: 'Reddit', visitors: 1800, percentage: 4, icon: 'ðŸ¤–', color: '#ff4500' },
        ];

        const countries = [
            { name: 'United States', code: 'US', visitors: 18500, flag: 'ðŸ‡ºðŸ‡¸' },
            { name: 'United Kingdom', code: 'GB', visitors: 8200, flag: 'ðŸ‡¬ðŸ‡§' },
            { name: 'Germany', code: 'DE', visitors: 5400, flag: 'ðŸ‡©ðŸ‡ª' },
            { name: 'Canada', code: 'CA', visitors: 4100, flag: 'ðŸ‡¨ðŸ‡¦' },
            { name: 'France', code: 'FR', visitors: 3200, flag: 'ðŸ‡«ðŸ‡·' },
            { name: 'Australia', code: 'AU', visitors: 2800, flag: 'ðŸ‡¦ðŸ‡º' },
            { name: 'Japan', code: 'JP', visitors: 2100, flag: 'ðŸ‡¯ðŸ‡µ' },
            { name: 'India', code: 'IN', visitors: 1900, flag: 'ðŸ‡®ðŸ‡³' },
        ];

        const devices = [
            { type: 'Desktop', percentage: 58, icon: 'ðŸ’»' },
            { type: 'Mobile', percentage: 35, icon: 'ðŸ“±' },
            { type: 'Tablet', percentage: 7, icon: 'ðŸ“Ÿ' },
        ];

        const browsers = [
            { name: 'Chrome', percentage: 62, color: '#4285f4' },
            { name: 'Safari', percentage: 24, color: '#000' },
            { name: 'Firefox', percentage: 8, color: '#ff7139' },
            { name: 'Edge', percentage: 4, color: '#0078d7' },
            { name: 'Other', percentage: 2, color: '#6b7280' },
        ];

        const liveVisitors = [
            { id: 1, page: '/pricing', country: 'ðŸ‡ºðŸ‡¸', device: 'Desktop', duration: '2:34', source: 'Google' },
            { id: 2, page: '/features', country: 'ðŸ‡¬ðŸ‡§', device: 'Mobile', duration: '1:12', source: 'Direct' },
            { id: 3, page: '/blog/seo-guide', country: 'ðŸ‡©ðŸ‡ª', device: 'Desktop', duration: '4:56', source: 'Twitter' },
            { id: 4, page: '/', country: 'ðŸ‡¨ðŸ‡¦', device: 'Desktop', duration: '0:45', source: 'Product Hunt' },
            { id: 5, page: '/signup', country: 'ðŸ‡«ðŸ‡·', device: 'Mobile', duration: '1:23', source: 'Google' },
        ];

        // Icons
        const Icons = {
            Dashboard: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                </svg>
            ),
            Globe: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            ),
            Users: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
            ),
            Chart: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                </svg>
            ),
            Code: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                </svg>
            ),
            Settings: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
            ),
            Plus: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                </svg>
            ),
            Eye: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                </svg>
            ),
            Clock: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            ),
            TrendUp: () => (
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                </svg>
            ),
            TrendDown: () => (
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6" />
                </svg>
            ),
            Copy: () => (
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                </svg>
            ),
            Check: () => (
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                </svg>
            ),
            Live: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5.636 18.364a9 9 0 010-12.728m12.728 0a9 9 0 010 12.728m-9.9-2.829a5 5 0 010-7.07m7.072 0a5 5 0 010 7.07M13 12a1 1 0 11-2 0 1 1 0 012 0z" />
                </svg>
            ),
            Funnel: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
                </svg>
            ),
            Moon: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
            ),
            Sun: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
            ),
            ChevronDown: () => (
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                </svg>
            ),
            ArrowRight: () => (
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                </svg>
            ),
            Dollar: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            ),
        };

        // Chart Component
        const AnalyticsChart = ({ data, selectedMetric }) => {
            const canvasRef = useRef(null);
            const chartRef = useRef(null);

            useEffect(() => {
                if (chartRef.current) {
                    chartRef.current.destroy();
                }

                const ctx = canvasRef.current.getContext('2d');

                const gradient = ctx.createLinearGradient(0, 0, 0, 300);
                gradient.addColorStop(0, 'rgba(99, 102, 241, 0.3)');
                gradient.addColorStop(1, 'rgba(99, 102, 241, 0)');

                chartRef.current = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: data.map(d => {
                            const date = new Date(d.date);
                            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                        }),
                        datasets: [{
                            label: selectedMetric,
                            data: data.map(d => d[selectedMetric]),
                            borderColor: '#6366f1',
                            backgroundColor: gradient,
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 0,
                            pointHoverRadius: 6,
                            pointHoverBackgroundColor: '#6366f1',
                            pointHoverBorderColor: '#fff',
                            pointHoverBorderWidth: 3,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index',
                        },
                        plugins: {
                            legend: {
                                display: false,
                            },
                            tooltip: {
                                backgroundColor: 'rgba(17, 24, 39, 0.95)',
                                titleColor: '#fff',
                                bodyColor: '#fff',
                                padding: 16,
                                cornerRadius: 12,
                                titleFont: {
                                    size: 14,
                                    weight: '600',
                                    family: 'DM Sans',
                                },
                                bodyFont: {
                                    size: 24,
                                    weight: '700',
                                    family: 'DM Sans',
                                },
                                displayColors: false,
                                callbacks: {
                                    label: (context) => context.parsed.y.toLocaleString(),
                                }
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    display: false,
                                },
                                ticks: {
                                    color: '#94a3b8',
                                    font: {
                                        size: 11,
                                        family: 'DM Sans',
                                    },
                                    maxTicksLimit: 8,
                                }
                            },
                            y: {
                                grid: {
                                    color: 'rgba(148, 163, 184, 0.1)',
                                },
                                ticks: {
                                    color: '#94a3b8',
                                    font: {
                                        size: 11,
                                        family: 'DM Sans',
                                    },
                                    callback: (value) => value >= 1000 ? `${value / 1000}k` : value,
                                },
                                border: {
                                    display: false,
                                }
                            }
                        }
                    }
                });

                return () => {
                    if (chartRef.current) {
                        chartRef.current.destroy();
                    }
                };
            }, [data, selectedMetric]);

            return <canvas ref={canvasRef} />;
        };

        // Stat Card Component
        const StatCard = ({ title, value, change, icon, delay = 0 }) => {
            const isPositive = change >= 0;
            return (
                <div
                    className="stat-card glass-card rounded-2xl p-6 animate-slide-up"
                    style={{ animationDelay: `${delay}ms` }}
                >
                    <div className="flex items-center justify-between mb-4">
                        <span className="text-slate-500 dark:text-slate-400 text-sm font-medium">{title}</span>
                        <div className="w-10 h-10 rounded-xl bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400">
                            {icon}
                        </div>
                    </div>
                    <div className="flex items-end gap-3">
                        <span className="text-3xl font-bold text-slate-900 dark:text-white">{value}</span>
                        <span className={`flex items-center gap-1 text-sm font-medium ${isPositive ? 'text-emerald-600' : 'text-rose-600'}`}>
                            {isPositive ? <Icons.TrendUp /> : <Icons.TrendDown />}
                            {Math.abs(change)}%
                        </span>
                    </div>
                </div>
            );
        };

        // Progress Bar Component
        const ProgressBar = ({ percentage, color = '#6366f1', delay = 0 }) => (
            <div className="h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
                <div
                    className="h-full rounded-full transition-all duration-1000 ease-out"
                    style={{
                        width: `${percentage}%`,
                        backgroundColor: color,
                        animationDelay: `${delay}ms`
                    }}
                />
            </div>
        );

        // Website Selector Component
        const WebsiteSelector = ({ websites, selectedSite, onSelect }) => {
            const [isOpen, setIsOpen] = useState(false);
            const selected = websites.find(w => w.id === selectedSite);

            return (
                <div className="relative">
                    <button
                        onClick={() => setIsOpen(!isOpen)}
                        className="flex items-center gap-3 px-4 py-3 glass-card rounded-xl hover:bg-white/80 dark:hover:bg-slate-800/80 transition-colors w-full"
                    >
                        <div className="w-8 h-8 rounded-lg flex items-center justify-center" style={{ backgroundColor: selected?.color + '20' }}>
                            <Icons.Globe />
                        </div>
                        <div className="flex-1 text-left">
                            <div className="font-semibold text-slate-900 dark:text-white text-sm">{selected?.domain}</div>
                            <div className="text-xs text-slate-500">{selected?.visitors.toLocaleString()} visitors</div>
                        </div>
                        <Icons.ChevronDown />
                    </button>

                    {isOpen && (
                        <div className="absolute top-full left-0 right-0 mt-2 glass-card rounded-xl shadow-2xl z-50 max-h-80 overflow-auto animate-fade-in">
                            {websites.map((site) => (
                                <button
                                    key={site.id}
                                    onClick={() => {
                                        onSelect(site.id);
                                        setIsOpen(false);
                                    }}
                                    className={`flex items-center gap-3 px-4 py-3 hover:bg-slate-100 dark:hover:bg-slate-700/50 transition-colors w-full ${site.id === selectedSite ? 'bg-primary-50 dark:bg-primary-900/20' : ''
                                        }`}
                                >
                                    <div className="w-8 h-8 rounded-lg flex items-center justify-center" style={{ backgroundColor: site.color + '20' }}>
                                        <div className="w-3 h-3 rounded-full" style={{ backgroundColor: site.color }} />
                                    </div>
                                    <div className="flex-1 text-left">
                                        <div className="font-medium text-slate-900 dark:text-white text-sm">{site.domain}</div>
                                        <div className="text-xs text-slate-500">{site.visitors.toLocaleString()} visitors</div>
                                    </div>
                                    {site.revenue > 0 && (
                                        <span className="text-xs font-medium text-emerald-600">${site.revenue.toLocaleString()}</span>
                                    )}
                                </button>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        // Script Modal Component
        const ScriptModal = ({ isOpen, onClose, siteId }) => {
            const [copied, setCopied] = useState(false);

            const script = `<!-- TrackFlow Analytics -->
<script>
  (function(w,d,s,l,i){
    w[l]=w[l]||[];
    var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s);
    j.async=true;
    j.src='https://track.yoursite.com/t.js';
    j.setAttribute('data-site','${siteId}');
    f.parentNode.insertBefore(j,f);
  })(window,document,'script','tf','TF-${siteId}');
<\/script>`;

            const handleCopy = () => {
                navigator.clipboard.writeText(script);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in">
                    <div className="glass-card rounded-2xl p-8 max-w-2xl w-full animate-slide-up shadow-2xl">
                        <h3 className="text-2xl font-bold text-slate-900 dark:text-white mb-2">Install Tracking Script</h3>
                        <p className="text-slate-600 dark:text-slate-400 mb-6">
                            Add this script to your website's <code className="px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-sm font-mono">&lt;head&gt;</code> tag to start tracking.
                        </p>

                        <div className="relative">
                            <pre className="bg-slate-900 text-slate-100 p-6 rounded-xl text-sm overflow-x-auto font-mono">
                                {script}
                            </pre>
                            <button
                                onClick={handleCopy}
                                className={`absolute top-4 right-4 px-4 py-2 rounded-lg font-medium text-sm flex items-center gap-2 transition-all ${copied
                                        ? 'bg-emerald-500 text-white'
                                        : 'bg-white/10 text-white hover:bg-white/20'
                                    }`}
                            >
                                {copied ? <Icons.Check /> : <Icons.Copy />}
                                {copied ? 'Copied!' : 'Copy'}
                            </button>
                        </div>

                        <div className="mt-6 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800">
                            <p className="text-amber-800 dark:text-amber-200 text-sm">
                                <strong>Note:</strong> The script is only 4KB and loads asynchronously, so it won't affect your page speed.
                            </p>
                        </div>

                        <div className="flex justify-end mt-6">
                            <button
                                onClick={onClose}
                                className="px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 transition-colors"
                            >
                                Done
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // Add Website Modal
        const AddWebsiteModal = ({ isOpen, onClose, onAdd }) => {
            const [domain, setDomain] = useState('');

            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in">
                    <div className="glass-card rounded-2xl p-8 max-w-md w-full animate-slide-up shadow-2xl">
                        <h3 className="text-2xl font-bold text-slate-900 dark:text-white mb-2">Add New Website</h3>
                        <p className="text-slate-600 dark:text-slate-400 mb-6">
                            Enter your website domain to start tracking analytics.
                        </p>

                        <input
                            type="text"
                            value={domain}
                            onChange={(e) => setDomain(e.target.value)}
                            placeholder="example.com"
                            className="w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all"
                        />

                        <div className="flex gap-3 mt-6">
                            <button
                                onClick={onClose}
                                className="flex-1 px-6 py-3 border border-slate-200 dark:border-slate-700 rounded-xl font-medium hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors text-slate-700 dark:text-slate-300"
                            >
                                Cancel
                            </button>
                            <button
                                onClick={() => {
                                    onAdd(domain);
                                    setDomain('');
                                    onClose();
                                }}
                                className="flex-1 px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 transition-colors"
                            >
                                Add Website
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // Live Visitors Component
        const LiveVisitors = ({ visitors }) => (
            <div className="space-y-3">
                {visitors.map((visitor, i) => (
                    <div
                        key={visitor.id}
                        className="flex items-center gap-4 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl animate-slide-up"
                        style={{ animationDelay: `${i * 50}ms` }}
                    >
                        <div className="relative">
                            <div className="w-10 h-10 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white font-bold">
                                {visitor.country}
                            </div>
                            <div className="absolute -bottom-1 -right-1 w-4 h-4 bg-emerald-500 rounded-full border-2 border-white dark:border-slate-800 live-dot" />
                        </div>
                        <div className="flex-1 min-w-0">
                            <div className="font-medium text-slate-900 dark:text-white truncate">{visitor.page}</div>
                            <div className="text-sm text-slate-500 flex items-center gap-2">
                                <span>{visitor.device}</span>
                                <span>â€¢</span>
                                <span>{visitor.source}</span>
                            </div>
                        </div>
                        <div className="text-right">
                            <div className="font-mono text-sm text-slate-600 dark:text-slate-400">{visitor.duration}</div>
                            <div className="text-xs text-slate-400">on page</div>
                        </div>
                    </div>
                ))}
            </div>
        );

        // Main App Component
        const App = () => {
            const [darkMode, setDarkMode] = useState(false);
            const [selectedSite, setSelectedSite] = useState(1);
            const [activeView, setActiveView] = useState('dashboard');
            const [selectedMetric, setSelectedMetric] = useState('visitors');
            const [dateRange, setDateRange] = useState('30d');
            const [showScriptModal, setShowScriptModal] = useState(false);
            const [showAddModal, setShowAddModal] = useState(false);
            const [siteList, setSiteList] = useState(websites);

            const chartData = useMemo(() => generateMockData(dateRange === '7d' ? 7 : dateRange === '30d' ? 30 : 90), [dateRange]);

            const totalVisitors = chartData.reduce((sum, d) => sum + d.visitors, 0);
            const totalPageviews = chartData.reduce((sum, d) => sum + d.pageviews, 0);
            const avgBounceRate = Math.round(chartData.reduce((sum, d) => sum + d.bounceRate, 0) / chartData.length);
            const avgDuration = Math.round(chartData.reduce((sum, d) => sum + d.avgDuration, 0) / chartData.length);

            useEffect(() => {
                if (darkMode) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            }, [darkMode]);

            const handleAddWebsite = (domain) => {
                const colors = ['#6366f1', '#8b5cf6', '#a855f7', '#d946ef', '#ec4899', '#f43f5e', '#f97316', '#eab308', '#22c55e', '#14b8a6'];
                const newSite = {
                    id: siteList.length + 1,
                    name: domain,
                    domain: domain,
                    visitors: 0,
                    revenue: 0,
                    color: colors[siteList.length % colors.length],
                };
                setSiteList([...siteList, newSite]);
                setSelectedSite(newSite.id);
                setShowScriptModal(true);
            };

            const menuItems = [
                { id: 'dashboard', label: 'Dashboard', icon: <Icons.Dashboard /> },
                { id: 'realtime', label: 'Real-time', icon: <Icons.Live /> },
                { id: 'pages', label: 'Pages', icon: <Icons.Eye /> },
                { id: 'sources', label: 'Sources', icon: <Icons.Chart /> },
                { id: 'funnels', label: 'Funnels', icon: <Icons.Funnel /> },
                { id: 'script', label: 'Get Script', icon: <Icons.Code /> },
                { id: 'settings', label: 'Settings', icon: <Icons.Settings /> },
            ];

            const renderContent = () => {
                switch (activeView) {
                    case 'realtime':
                        return (
                            <div className="space-y-6">
                                <div className="flex items-center gap-4">
                                    <div className="relative">
                                        <div className="w-4 h-4 bg-emerald-500 rounded-full animate-ping absolute" />
                                        <div className="w-4 h-4 bg-emerald-500 rounded-full relative" />
                                    </div>
                                    <span className="text-4xl font-bold text-slate-900 dark:text-white">{liveVisitors.length}</span>
                                    <span className="text-slate-500">visitors online right now</span>
                                </div>

                                <div className="glass-card rounded-2xl p-6">
                                    <h3 className="font-semibold text-slate-900 dark:text-white mb-4">Active Visitors</h3>
                                    <LiveVisitors visitors={liveVisitors} />
                                </div>
                            </div>
                        );

                    case 'pages':
                        return (
                            <div className="glass-card rounded-2xl p-6">
                                <h3 className="font-semibold text-slate-900 dark:text-white mb-6">Top Pages</h3>
                                <div className="space-y-4">
                                    {topPages.map((page, i) => (
                                        <div key={page.path} className="animate-slide-up" style={{ animationDelay: `${i * 50}ms` }}>
                                            <div className="flex items-center justify-between mb-2">
                                                <span className="font-mono text-sm text-slate-700 dark:text-slate-300">{page.path}</span>
                                                <span className="text-sm font-medium text-slate-900 dark:text-white">{page.views.toLocaleString()} views</span>
                                            </div>
                                            <ProgressBar percentage={page.percentage * 3} delay={i * 100} />
                                        </div>
                                    ))}
                                </div>
                            </div>
                        );

                    case 'sources':
                        return (
                            <div className="grid gap-6 lg:grid-cols-2">
                                <div className="glass-card rounded-2xl p-6">
                                    <h3 className="font-semibold text-slate-900 dark:text-white mb-6">Traffic Sources</h3>
                                    <div className="space-y-4">
                                        {trafficSources.map((source, i) => (
                                            <div key={source.source} className="flex items-center gap-4 animate-slide-up" style={{ animationDelay: `${i * 50}ms` }}>
                                                <div className="w-10 h-10 rounded-xl flex items-center justify-center text-xl" style={{ backgroundColor: source.color + '20' }}>
                                                    {source.icon}
                                                </div>
                                                <div className="flex-1">
                                                    <div className="flex justify-between mb-1">
                                                        <span className="font-medium text-slate-900 dark:text-white">{source.source}</span>
                                                        <span className="text-sm text-slate-500">{source.visitors.toLocaleString()}</span>
                                                    </div>
                                                    <ProgressBar percentage={source.percentage * 2} color={source.color} />
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                <div className="glass-card rounded-2xl p-6">
                                    <h3 className="font-semibold text-slate-900 dark:text-white mb-6">Top Countries</h3>
                                    <div className="space-y-4">
                                        {countries.map((country, i) => (
                                            <div key={country.code} className="flex items-center gap-4 animate-slide-up" style={{ animationDelay: `${i * 50}ms` }}>
                                                <span className="text-2xl">{country.flag}</span>
                                                <div className="flex-1">
                                                    <div className="flex justify-between mb-1">
                                                        <span className="font-medium text-slate-900 dark:text-white">{country.name}</span>
                                                        <span className="text-sm text-slate-500">{country.visitors.toLocaleString()}</span>
                                                    </div>
                                                    <ProgressBar percentage={(country.visitors / 18500) * 100} />
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        );

                    case 'funnels':
                        return (
                            <div className="glass-card rounded-2xl p-6">
                                <h3 className="font-semibold text-slate-900 dark:text-white mb-6">Conversion Funnel</h3>
                                <div className="space-y-4">
                                    {[
                                        { step: 'Homepage Visit', count: 45230, percentage: 100 },
                                        { step: 'Pricing Page', count: 18500, percentage: 41 },
                                        { step: 'Sign Up Started', count: 8200, percentage: 18 },
                                        { step: 'Email Verified', count: 5400, percentage: 12 },
                                        { step: 'Subscription', count: 1200, percentage: 2.7 },
                                    ].map((step, i) => (
                                        <div key={step.step} className="animate-slide-up" style={{ animationDelay: `${i * 100}ms` }}>
                                            <div className="flex items-center justify-between mb-2">
                                                <div className="flex items-center gap-3">
                                                    <span className="w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400 font-bold text-sm">
                                                        {i + 1}
                                                    </span>
                                                    <span className="font-medium text-slate-900 dark:text-white">{step.step}</span>
                                                </div>
                                                <div className="text-right">
                                                    <span className="font-bold text-slate-900 dark:text-white">{step.count.toLocaleString()}</span>
                                                    <span className="text-slate-500 text-sm ml-2">({step.percentage}%)</span>
                                                </div>
                                            </div>
                                            <div className="h-12 bg-gradient-to-r from-primary-500 to-primary-400 rounded-xl flex items-center justify-center transition-all duration-500"
                                                style={{ width: `${step.percentage}%`, minWidth: '80px' }}>
                                                <span className="text-white font-medium text-sm">{step.percentage}%</span>
                                            </div>
                                            {i < 4 && (
                                                <div className="flex justify-center my-2">
                                                    <Icons.ArrowRight />
                                                </div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        );

                    case 'script':
                        return (
                            <div className="max-w-2xl">
                                <div className="glass-card rounded-2xl p-8">
                                    <h3 className="text-2xl font-bold text-slate-900 dark:text-white mb-2">Install Tracking Script</h3>
                                    <p className="text-slate-600 dark:text-slate-400 mb-6">
                                        Add this lightweight script to your website to start tracking analytics. It's only 4KB and won't slow down your site.
                                    </p>

                                    <div className="space-y-6">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                                                Your tracking script
                                            </label>
                                            <pre className="bg-slate-900 text-slate-100 p-6 rounded-xl text-sm overflow-x-auto font-mono">
                                                {`<!-- TrackFlow Analytics -->
<script>
  (function(w,d,s,l,i){
    w[l]=w[l]||[];
    var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s);
    j.async=true;
    j.src='https://track.yoursite.com/t.js';
    j.setAttribute('data-site','${selectedSite}');
    f.parentNode.insertBefore(j,f);
  })(window,document,'script','tf','TF-${selectedSite}');
<\/script>`}
                                            </pre>
                                        </div>

                                        <div className="p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-xl border border-emerald-200 dark:border-emerald-800">
                                            <h4 className="font-semibold text-emerald-800 dark:text-emerald-200 mb-2">âœ… Privacy-first tracking</h4>
                                            <p className="text-emerald-700 dark:text-emerald-300 text-sm">
                                                No cookies required. GDPR compliant. We respect user privacy while giving you the insights you need.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        );

                    case 'settings':
                        return (
                            <div className="max-w-2xl space-y-6">
                                <div className="glass-card rounded-2xl p-6">
                                    <h3 className="font-semibold text-slate-900 dark:text-white mb-4">Website Settings</h3>
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                                                Website Domain
                                            </label>
                                            <input
                                                type="text"
                                                defaultValue={siteList.find(s => s.id === selectedSite)?.domain}
                                                className="w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                                                Timezone
                                            </label>
                                            <select className="w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white">
                                                <option>UTC</option>
                                                <option>America/New_York</option>
                                                <option>Europe/London</option>
                                                <option>Asia/Tokyo</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div className="glass-card rounded-2xl p-6">
                                    <h3 className="font-semibold text-slate-900 dark:text-white mb-4">Danger Zone</h3>
                                    <button className="px-4 py-2 bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-400 rounded-xl font-medium hover:bg-rose-200 dark:hover:bg-rose-900/50 transition-colors">
                                        Delete Website
                                    </button>
                                </div>
                            </div>
                        );

                    default:
                        return (
                            <>
                                {/* Stats Grid */}
                                <div className="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                                    <StatCard
                                        title="Unique Visitors"
                                        value={totalVisitors.toLocaleString()}
                                        change={12.5}
                                        icon={<Icons.Users />}
                                        delay={0}
                                    />
                                    <StatCard
                                        title="Page Views"
                                        value={totalPageviews.toLocaleString()}
                                        change={8.2}
                                        icon={<Icons.Eye />}
                                        delay={100}
                                    />
                                    <StatCard
                                        title="Bounce Rate"
                                        value={`${avgBounceRate}%`}
                                        change={-3.1}
                                        icon={<Icons.Chart />}
                                        delay={200}
                                    />
                                    <StatCard
                                        title="Avg. Duration"
                                        value={`${Math.floor(avgDuration / 60)}m ${avgDuration % 60}s`}
                                        change={5.7}
                                        icon={<Icons.Clock />}
                                        delay={300}
                                    />
                                </div>

                                {/* Main Chart */}
                                <div className="glass-card rounded-2xl p-6 mb-8 animate-slide-up" style={{ animationDelay: '400ms' }}>
                                    <div className="flex flex-wrap items-center justify-between gap-4 mb-6">
                                        <div className="flex gap-2">
                                            {['visitors', 'pageviews', 'sessions'].map((metric) => (
                                                <button
                                                    key={metric}
                                                    onClick={() => setSelectedMetric(metric)}
                                                    className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${selectedMetric === metric
                                                            ? 'bg-primary-600 text-white'
                                                            : 'bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700'
                                                        }`}
                                                >
                                                    {metric.charAt(0).toUpperCase() + metric.slice(1)}
                                                </button>
                                            ))}
                                        </div>
                                        <div className="flex gap-2">
                                            {['7d', '30d', '90d'].map((range) => (
                                                <button
                                                    key={range}
                                                    onClick={() => setDateRange(range)}
                                                    className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${dateRange === range
                                                            ? 'bg-slate-900 dark:bg-white text-white dark:text-slate-900'
                                                            : 'bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700'
                                                        }`}
                                                >
                                                    {range}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                    <div className="h-80">
                                        <AnalyticsChart data={chartData} selectedMetric={selectedMetric} />
                                    </div>
                                </div>

                                {/* Bottom Grid */}
                                <div className="grid gap-6 lg:grid-cols-3">
                                    {/* Top Pages */}
                                    <div className="glass-card rounded-2xl p-6 animate-slide-up" style={{ animationDelay: '500ms' }}>
                                        <h3 className="font-semibold text-slate-900 dark:text-white mb-4">Top Pages</h3>
                                        <div className="space-y-3">
                                            {topPages.slice(0, 5).map((page, i) => (
                                                <div key={page.path} className="flex items-center justify-between">
                                                    <span className="font-mono text-sm text-slate-600 dark:text-slate-400 truncate flex-1 mr-4">
                                                        {page.path}
                                                    </span>
                                                    <span className="text-sm font-medium text-slate-900 dark:text-white whitespace-nowrap">
                                                        {page.views.toLocaleString()}
                                                    </span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    {/* Traffic Sources */}
                                    <div className="glass-card rounded-2xl p-6 animate-slide-up" style={{ animationDelay: '600ms' }}>
                                        <h3 className="font-semibold text-slate-900 dark:text-white mb-4">Traffic Sources</h3>
                                        <div className="space-y-3">
                                            {trafficSources.slice(0, 5).map((source) => (
                                                <div key={source.source} className="flex items-center gap-3">
                                                    <span className="text-lg">{source.icon}</span>
                                                    <span className="flex-1 text-slate-600 dark:text-slate-400">{source.source}</span>
                                                    <span className="font-medium text-slate-900 dark:text-white">{source.percentage}%</span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    {/* Devices & Browsers */}
                                    <div className="glass-card rounded-2xl p-6 animate-slide-up" style={{ animationDelay: '700ms' }}>
                                        <h3 className="font-semibold text-slate-900 dark:text-white mb-4">Devices</h3>
                                        <div className="space-y-3">
                                            {devices.map((device) => (
                                                <div key={device.type}>
                                                    <div className="flex items-center justify-between mb-1">
                                                        <span className="flex items-center gap-2 text-slate-600 dark:text-slate-400">
                                                            {device.icon} {device.type}
                                                        </span>
                                                        <span className="font-medium text-slate-900 dark:text-white">{device.percentage}%</span>
                                                    </div>
                                                    <ProgressBar percentage={device.percentage} />
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </>
                        );
                }
            };

            return (
                <div className="flex min-h-screen">
                    {/* Sidebar */}
                    <aside className="w-72 border-r border-slate-200 dark:border-slate-800 p-6 flex flex-col glass-card">
                        {/* Logo */}
                        <div className="flex items-center gap-3 mb-8">
                            <div className="w-10 h-10 gradient-animated rounded-xl flex items-center justify-center">
                                <svg className="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                                </svg>
                            </div>
                            <span className="text-xl font-bold text-slate-900 dark:text-white">TrackFlow</span>
                        </div>

                        {/* Website Selector */}
                        <div className="mb-6">
                            <WebsiteSelector
                                websites={siteList}
                                selectedSite={selectedSite}
                                onSelect={setSelectedSite}
                            />
                        </div>

                        {/* Add Website Button */}
                        <button
                            onClick={() => setShowAddModal(true)}
                            className="flex items-center gap-3 px-4 py-3 mb-6 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl text-slate-500 hover:border-primary-500 hover:text-primary-600 transition-colors"
                        >
                            <Icons.Plus />
                            <span className="font-medium">Add Website</span>
                        </button>

                        {/* Navigation */}
                        <nav className="flex-1">
                            <ul className="space-y-1">
                                {menuItems.map((item) => (
                                    <li key={item.id}>
                                        <button
                                            onClick={() => {
                                                if (item.id === 'script') {
                                                    setShowScriptModal(true);
                                                } else {
                                                    setActiveView(item.id);
                                                }
                                            }}
                                            className={`sidebar-item flex items-center gap-3 px-4 py-3 rounded-xl w-full transition-all ${activeView === item.id
                                                    ? 'bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-medium'
                                                    : 'text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800'
                                                }`}
                                        >
                                            {item.icon}
                                            <span>{item.label}</span>
                                            {item.id === 'realtime' && (
                                                <span className="ml-auto flex items-center gap-1.5">
                                                    <span className="w-2 h-2 bg-emerald-500 rounded-full animate-pulse" />
                                                    <span className="text-xs font-medium">{liveVisitors.length}</span>
                                                </span>
                                            )}
                                        </button>
                                    </li>
                                ))}
                            </ul>
                        </nav>

                        {/* Theme Toggle */}
                        <button
                            onClick={() => setDarkMode(!darkMode)}
                            className="flex items-center gap-3 px-4 py-3 rounded-xl text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors mt-auto"
                        >
                            {darkMode ? <Icons.Sun /> : <Icons.Moon />}
                            <span>{darkMode ? 'Light Mode' : 'Dark Mode'}</span>
                        </button>
                    </aside>

                    {/* Main Content */}
                    <main className="flex-1 p-8 overflow-auto">
                        <div className="max-w-7xl mx-auto">
                            {/* Header */}
                            <div className="flex items-center justify-between mb-8">
                                <div>
                                    <h1 className="text-3xl font-bold text-slate-900 dark:text-white capitalize">
                                        {activeView === 'dashboard' ? siteList.find(s => s.id === selectedSite)?.domain : activeView}
                                    </h1>
                                    <p className="text-slate-500 mt-1">
                                        {activeView === 'dashboard'
                                            ? `Last ${dateRange === '7d' ? '7 days' : dateRange === '30d' ? '30 days' : '90 days'}`
                                            : `View ${activeView} analytics`
                                        }
                                    </p>
                                </div>

                                {activeView === 'dashboard' && (
                                    <button
                                        onClick={() => setShowScriptModal(true)}
                                        className="px-6 py-3 bg-primary-600 text-white rounded-xl font-medium hover:bg-primary-700 transition-colors flex items-center gap-2 animate-pulse-glow"
                                    >
                                        <Icons.Code />
                                        Get Script
                                    </button>
                                )}
                            </div>

                            {renderContent()}
                        </div>
                    </main>

                    {/* Modals */}
                    <ScriptModal
                        isOpen={showScriptModal}
                        onClose={() => setShowScriptModal(false)}
                        siteId={selectedSite}
                    />
                    <AddWebsiteModal
                        isOpen={showAddModal}
                        onClose={() => setShowAddModal(false)}
                        onAdd={handleAddWebsite}
                    />
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>

</html>